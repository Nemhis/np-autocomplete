!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("jQuery")):"function"==typeof define&&define.amd?define("autocomplete",["jQuery"],e):"object"==typeof exports?exports.autocomplete=e(require("jQuery")):t.autocomplete=e(t.jQuery)}(window,(function(t){return function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(e,i){e.exports=t},function(t,e,i){"use strict";i.r(e);var s=i(0),n=i.n(s),o={escapeRegExChars:function(t){return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")},createNode:function(t){var e=document.createElement("div");return e.className=t,e.style.position="absolute",e.style.display="none",e}},a=27,r=9,u=13,l=38,h=39,c=40,g=n.a.noop;function d(t,e){this.element=t,this.el=n()(t),this.suggestions=[],this.badQueries=[],this.selectedIndex=-1,this.currentValue=this.element.value,this.timeoutId=null,this.cachedResponse={},this.onChangeTimeout=null,this.onChange=null,this.isLocal=!1,this.suggestionsContainer=null,this.noSuggestionsContainer=null,this.options=n.a.extend(!0,{},d.defaults,e),this.classes={selected:"autocomplete-selected",suggestion:"autocomplete-suggestion"},this.hint=null,this.hintValue="",this.selection=null,this.initialize(),this.setOptions(e)}d.utils=o,n.a.Autocomplete=d,d.defaults={ajaxSettings:{},autoSelectFirst:!1,appendTo:"body",serviceUrl:null,lookup:null,onSelect:null,width:"auto",minChars:1,maxHeight:300,deferRequestBy:0,params:{},formatResult:function(t,e){if(!e)return t.value;var i="("+o.escapeRegExChars(e)+")";return t.value.replace(new RegExp(i,"gi"),"<strong>$1</strong>").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/&lt;(\/?strong)&gt;/g,"<$1>")},formatGroup:function(t,e){return'<div class="autocomplete-group">'+e+"</div>"},delimiter:null,zIndex:9999,type:"GET",noCache:!1,onSearchStart:g,onSearchComplete:g,onSearchError:g,preserveInput:!1,containerClass:"autocomplete-suggestions",tabDisabled:!1,dataType:"text",currentRequest:null,triggerSelectOnValidInput:!0,preventBadQueries:!0,lookupFilter:function(t,e,i){return-1!==t.value.toLowerCase().indexOf(i)},paramName:"query",transformResult:function(t){return"string"==typeof t?n.a.parseJSON(t):t},showNoSuggestionNotice:!1,noSuggestionNotice:"No results",orientation:"bottom",forceFixPosition:!1},d.prototype={initialize:function(){var t,e=this,i="."+e.classes.suggestion,s=e.classes.selected,o=e.options;e.element.setAttribute("autocomplete","off"),e.noSuggestionsContainer=n()('<div class="autocomplete-no-suggestion"></div>').html(this.options.noSuggestionNotice).get(0),e.suggestionsContainer=d.utils.createNode(o.containerClass),(t=n()(e.suggestionsContainer)).appendTo(o.appendTo||"body"),"auto"!==o.width&&t.css("width",o.width),t.on("mouseover.autocomplete",i,(function(){e.activate(n()(this).data("index"))})),t.on("mouseout.autocomplete",(function(){e.selectedIndex=-1,t.children("."+s).removeClass(s)})),t.on("click.autocomplete",i,(function(){e.select(n()(this).data("index"))})),t.on("click.autocomplete",(function(){clearTimeout(e.blurTimeoutId)})),e.fixPositionCapture=function(){e.visible&&e.fixPosition()},n()(window).on("resize.autocomplete",e.fixPositionCapture),e.el.on("keydown.autocomplete",(function(t){e.onKeyPress(t)})),e.el.on("keyup.autocomplete",(function(t){e.onKeyUp(t)})),e.el.on("blur.autocomplete",(function(){e.onBlur()})),e.el.on("focus.autocomplete",(function(){e.onFocus()})),e.el.on("change.autocomplete",(function(t){e.onKeyUp(t)})),e.el.on("input.autocomplete",(function(t){e.onKeyUp(t)}))},onFocus:function(){this.fixPosition(),this.el.val().length>=this.options.minChars&&this.onValueChange()},onBlur:function(){var t=this,e=t.options,i=t.el.val(),s=t.getQuery(i);t.blurTimeoutId=setTimeout((function(){t.hide(),t.selection&&t.currentValue!==s&&(e.onInvalidateSelection||n.a.noop).call(t.element)}),200)},abortAjax:function(){this.currentRequest&&(this.currentRequest.abort(),this.currentRequest=null)},setOptions:function(t){var e=n.a.extend({},this.options,t);this.isLocal=Array.isArray(e.lookup),this.isLocal&&(e.lookup=this.verifySuggestionsFormat(e.lookup)),e.orientation=this.validateOrientation(e.orientation,"bottom"),n()(this.suggestionsContainer).css({"max-height":e.maxHeight+"px",width:e.width+"px","z-index":e.zIndex}),this.options=e},clearCache:function(){this.cachedResponse={},this.badQueries=[]},clear:function(){this.clearCache(),this.currentValue="",this.suggestions=[]},disable:function(){this.disabled=!0,clearTimeout(this.onChangeTimeout),this.abortAjax()},enable:function(){this.disabled=!1},fixPosition:function(){var t=n()(this.suggestionsContainer),e=t.parent().get(0);if(e===document.body||this.options.forceFixPosition){var i=this.options.orientation,s=t.outerHeight(),o=this.el.outerHeight(),a=this.el.offset(),r={top:a.top,left:a.left};if("auto"===i){var u=n()(window).height(),l=n()(window).scrollTop(),h=-l+a.top-s,c=l+u-(a.top+o+s);i=Math.max(h,c)===h?"top":"bottom"}if(r.top+="top"===i?-s:o,e!==document.body){var g,d=t.css("opacity");this.visible||t.css("opacity",0).show(),g=t.offsetParent().offset(),r.top-=g.top,r.top+=e.scrollTop,r.left-=g.left,this.visible||t.css("opacity",d).hide()}"auto"===this.options.width&&(r.width=this.el.outerWidth()+"px"),t.css(r)}},isCursorAtEnd:function(){var t,e=this.el.val().length,i=this.element.selectionStart;return"number"==typeof i?i===e:!document.selection||((t=document.selection.createRange()).moveStart("character",-e),e===t.text.length)},onKeyPress:function(t){if(this.disabled||this.visible||t.which!==c||!this.currentValue){if(!this.disabled&&this.visible){switch(t.which){case a:this.el.val(this.currentValue),this.hide();break;case h:if(this.hint&&this.options.onHint&&this.isCursorAtEnd()){this.selectHint();break}return;case r:if(this.hint&&this.options.onHint)return void this.selectHint();if(-1===this.selectedIndex)return void this.hide();if(this.select(this.selectedIndex),!1===this.options.tabDisabled)return;break;case u:if(-1===this.selectedIndex)return void this.hide();this.select(this.selectedIndex);break;case l:this.moveUp();break;case c:this.moveDown();break;default:return}t.stopImmediatePropagation(),t.preventDefault()}}else this.suggest()},onKeyUp:function(t){var e=this;if(!e.disabled){switch(t.which){case l:case c:return}clearTimeout(e.onChangeTimeout),e.currentValue!==e.el.val()&&(e.findBestHint(),e.options.deferRequestBy>0?e.onChangeTimeout=setTimeout((function(){e.onValueChange()}),e.options.deferRequestBy):e.onValueChange())}},onValueChange:function(){if(this.ignoreValueChange)this.ignoreValueChange=!1;else{var t=this.options,e=this.el.val(),i=this.getQuery(e);this.selection&&this.currentValue!==i&&(this.selection=null,(t.onInvalidateSelection||n.a.noop).call(this.element)),clearTimeout(this.onChangeTimeout),this.currentValue=e,this.selectedIndex=-1,t.triggerSelectOnValidInput&&this.isExactMatch(i)?this.select(0):i.length<t.minChars?this.hide():this.getSuggestions(i)}},isExactMatch:function(t){var e=this.suggestions;return 1===e.length&&e[0].value.toLowerCase()===t.toLowerCase()},getQuery:function(t){var e,i=this.options.delimiter;return i?(e=t.split(i),n.a.trim(e[e.length-1])):t},getSuggestionsLocal:function(t){var e,i=this.options,s=t.toLowerCase(),o=i.lookupFilter,a=parseInt(i.lookupLimit,10);return e={suggestions:n.a.grep(i.lookup,(function(e){return o(e,t,s)}))},a&&e.suggestions.length>a&&(e.suggestions=e.suggestions.slice(0,a)),e},getSuggestions:function(t){var e,i,s,o,a=this,r=a.options,u=r.serviceUrl;r.params[r.paramName]=t,!1!==r.onSearchStart.call(a.element,r.params)&&(i=r.ignoreParams?null:r.params,n.a.isFunction(r.lookup)?r.lookup(t,(function(e){a.suggestions=e.suggestions,a.suggest(),r.onSearchComplete.call(a.element,t,e.suggestions)})):(a.isLocal?e=a.getSuggestionsLocal(t):(n.a.isFunction(u)&&(u=u.call(a.element,t)),s=u+"?"+n.a.param(i||{}),e=a.cachedResponse[s]),e&&Array.isArray(e.suggestions)?(a.suggestions=e.suggestions,a.suggest(),r.onSearchComplete.call(a.element,t,e.suggestions)):a.isBadQuery(t)?r.onSearchComplete.call(a.element,t,[]):(a.abortAjax(),o={url:u,data:i,type:r.type,dataType:r.dataType},n.a.extend(o,r.ajaxSettings),a.currentRequest=n.a.ajax(o).done((function(e){var i;a.currentRequest=null,i=r.transformResult(e,t),a.processResponse(i,t,s),r.onSearchComplete.call(a.element,t,i.suggestions)})).fail((function(e,i,s){r.onSearchError.call(a.element,t,e,i,s)})))))},isBadQuery:function(t){if(!this.options.preventBadQueries)return!1;for(var e=this.badQueries,i=e.length;i--;)if(0===t.indexOf(e[i]))return!0;return!1},hide:function(){var t=n()(this.suggestionsContainer);n.a.isFunction(this.options.onHide)&&this.visible&&this.options.onHide.call(this.element,t),this.visible=!1,this.selectedIndex=-1,clearTimeout(this.onChangeTimeout),n()(this.suggestionsContainer).hide(),this.signalHint(null)},suggest:function(){if(this.suggestions.length){var t,e=this.options,i=e.groupBy,s=e.formatResult,o=this.getQuery(this.currentValue),a=this.classes.suggestion,r=this.classes.selected,u=n()(this.suggestionsContainer),l=n()(this.noSuggestionsContainer),h=e.beforeRender,c="";e.triggerSelectOnValidInput&&this.isExactMatch(o)?this.select(0):(n.a.each(this.suggestions,(function(n,r){i&&(c+=function(s,n){var o=s.data[i];return t===o?"":(t=o,e.formatGroup(s,t))}(r,0)),c+='<div class="'+a+'" data-index="'+n+'">'+s(r,o,n)+"</div>"})),this.adjustContainerWidth(),l.detach(),u.html(c),n.a.isFunction(h)&&h.call(this.element,u,this.suggestions),this.fixPosition(),u.show(),e.autoSelectFirst&&(this.selectedIndex=0,u.scrollTop(0),u.children("."+a).first().addClass(r)),this.visible=!0,this.findBestHint())}else this.options.showNoSuggestionNotice?this.noSuggestions():this.hide()},noSuggestions:function(){var t=this.options.beforeRender,e=n()(this.suggestionsContainer),i=n()(this.noSuggestionsContainer);this.adjustContainerWidth(),i.detach(),e.empty(),e.append(i),n.a.isFunction(t)&&t.call(this.element,e,this.suggestions),this.fixPosition(),e.show(),this.visible=!0},adjustContainerWidth:function(){var t,e=this.options,i=n()(this.suggestionsContainer);"auto"===e.width?(t=this.el.outerWidth(),i.css("width",t>0?t:300)):"flex"===e.width&&i.css("width","")},findBestHint:function(){var t=this.el.val().toLowerCase(),e=null;t&&(n.a.each(this.suggestions,(function(i,s){var n=0===s.value.toLowerCase().indexOf(t);return n&&(e=s),!n})),this.signalHint(e))},signalHint:function(t){var e="";t&&(e=this.currentValue+t.value.substr(this.currentValue.length)),this.hintValue!==e&&(this.hintValue=e,this.hint=t,(this.options.onHint||n.a.noop)(e))},verifySuggestionsFormat:function(t){return t.length&&"string"==typeof t[0]?n.a.map(t,(function(t){return{value:t,data:null}})):t},validateOrientation:function(t,e){return t=n.a.trim(t||"").toLowerCase(),-1===n.a.inArray(t,["auto","bottom","top"])&&(t=e),t},processResponse:function(t,e,i){var s=this.options;t.suggestions=this.verifySuggestionsFormat(t.suggestions),s.noCache||(this.cachedResponse[i]=t,s.preventBadQueries&&!t.suggestions.length&&this.badQueries.push(e)),e===this.getQuery(this.currentValue)&&(this.suggestions=t.suggestions,this.suggest())},activate:function(t){var e,i=this.classes.selected,s=n()(this.suggestionsContainer),o=s.find("."+this.classes.suggestion);return s.find("."+i).removeClass(i),this.selectedIndex=t,-1!==this.selectedIndex&&o.length>this.selectedIndex?(e=o.get(this.selectedIndex),n()(e).addClass(i),e):null},selectHint:function(){var t=n.a.inArray(this.hint,this.suggestions);this.select(t)},select:function(t){this.hide(),this.onSelect(t)},moveUp:function(){if(-1!==this.selectedIndex)return 0===this.selectedIndex?(n()(this.suggestionsContainer).children("."+this.classes.suggestion).first().removeClass(this.classes.selected),this.selectedIndex=-1,this.ignoreValueChange=!1,this.el.val(this.currentValue),void this.findBestHint()):void this.adjustScroll(this.selectedIndex-1)},moveDown:function(){this.selectedIndex!==this.suggestions.length-1&&this.adjustScroll(this.selectedIndex+1)},adjustScroll:function(t){var e=this.activate(t);if(e){var i,s,o,a=n()(e).outerHeight();i=e.offsetTop,o=(s=n()(this.suggestionsContainer).scrollTop())+this.options.maxHeight-a,i<s?n()(this.suggestionsContainer).scrollTop(i):i>o&&n()(this.suggestionsContainer).scrollTop(i-this.options.maxHeight+a),this.options.preserveInput||(this.ignoreValueChange=!0,this.el.val(this.getValue(this.suggestions[t].value))),this.signalHint(null)}},onSelect:function(t){var e=this.options.onSelect,i=this.suggestions[t];this.currentValue=this.getValue(i.value),this.currentValue===this.el.val()||this.options.preserveInput||this.el.val(this.currentValue),this.signalHint(null),this.suggestions=[],this.selection=i,n.a.isFunction(e)&&e.call(this.element,i)},getValue:function(t){var e,i,s=this.options.delimiter;return s?1===(i=(e=this.currentValue).split(s)).length?t:e.substr(0,e.length-i[i.length-1].length)+t:t},dispose:function(){this.el.off(".autocomplete").removeData("autocomplete"),n()(window).off("resize.autocomplete",this.fixPositionCapture),n()(this.suggestionsContainer).remove()}},n.a.fn.devbridgeAutocomplete=function(t,e){var i="autocomplete";return arguments.length?this.each((function(){var s=n()(this),o=s.data(i);"string"==typeof t?o&&"function"==typeof o[t]&&o[t](e):(o&&o.dispose&&o.dispose(),o=new d(this,t),s.data(i,o))})):this.first().data(i)},n.a.fn.autocomplete||(n.a.fn.autocomplete=n.a.fn.devbridgeAutocomplete)}])}));